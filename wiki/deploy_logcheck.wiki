#summary deploying log2gantt to run in the daily Logcheck cron job
#labels Phase-Deploy

= Integrating log2gantt into Logcheck =

For a daily update about what's happening on our server we integrated _log2gantt_ in the [http://logcheck.org/ Logcheck] script which is executed daily by cron.

In the script we call _log2gantt_ after the file {{{auth_check.$$}}} was created by inserting the following lines
{{{
JARFILE=$(ls -1 /usr/local/log2gantt/log2gantt-*.jar | sort | tail -n 1)
java -Xmx30m -jar $JARFILE -i $TMPDIR/auth_check.$$ -o $TMPDIR/auth_gantt_$$.png -f
}}}

To attach the gantt graph picture to the result mail we inserted {{{-a /$TMPDIR/gantt_chart_$$.png}}} after the two {{{$MAIL}}} commands at the end of the script (we use {{{mutt}}} as mailer).

Finally we let cron execute the Logcheck script daily by executing the command
{{{
> ln -s /usr/local/bin/logcheck.sh /etc/cron.daily/logcheck.sh
}}}